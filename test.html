

<html>
<head>
	<title>My first Three.js app</title>
	<style>canvas { width: 100%; height: 100% }</style>
</head>
<body>
	<script src="libs/three.js/three.min.js"></script>
	<script type="text/javascript" src="./src/Potree.js"></script>
	<script type="text/javascript" >Potree.importScripts("./");</script>
	<script>
		var renderer;
		var camera;
		var cube;
		var scene;
		
		function initThree(){
			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

			renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth, window.innerHeight);
			document.body.appendChild(renderer.domElement);

			var geometry = new THREE.CubeGeometry(1,1,1);
			var material = new THREE.MeshLambertMaterial({color: 0xdddddd});
			cube = new THREE.Mesh(geometry, material);
			scene.add(cube);
			cube.position = new THREE.Vector3(0,-1,-2.5);

			camera.position.z = 4;
			camera.position.y = 1;
			
			var pointLight = new THREE.PointLight(0xffffff);
			pointLight.position.set(10, 10, 10);
			scene.add(pointLight);
		}
		
		function initPotree(){
			Potree.init(renderer.domElement);
			
			var cloudURL = "./resources/pointclouds/lion_takanawa/cloud.js";
			var pcoNode = POCLoader.load(cloudURL);
			var pscene = Potree.currentScene;
			console.log(pscene);
			pscene.rootNode.addChild(pcoNode);
			pcoNode.scale(1,-1,1);
			pcoNode.rotateY(4);
			pcoNode.translate(-7,0,2);
			MaterialManager.getMaterial("pointCloud").pointSize = 0.6;
			
			pscene.activeCamera = camera;
			Potree.Settings.frustumCulling = false;
			
		}

		function render() {
			requestAnimationFrame(render);

			cube.rotation.x += 0.01;
			cube.rotation.y += 0.01;
			
			renderer.render(scene, camera);
			
			camera.viewMatrix = camera.matrixWorldInverse;
			Potree.render();
		};
		
		initThree();
		initPotree();
		render();
		
	</script>
</body>
</html>